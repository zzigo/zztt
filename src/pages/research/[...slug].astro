---
import { type CollectionEntry, getCollection } from 'astro:content';
import BlogPost from '../../layouts/ResearchPost.astro';
import { render } from 'astro:content';

export async function getStaticPaths() {
	const posts = await getCollection('research');
	// Generate all possible slug variations (lowercase, original case)
	const paths: Array<{ params: { slug: string }; props: CollectionEntry<'research'> }> = [];
	
	posts.forEach((post) => {
		const originalSlug = post.id.replace(/\.md$/, '');
		const normalizedSlug = originalSlug.toLowerCase().replace(/\s+/g, '-');
		
		// Add the normalized lowercase version as primary
		paths.push({
			params: { slug: normalizedSlug },
			props: post,
		});
		
		// Also add original case version if different
		if (originalSlug !== normalizedSlug) {
			paths.push({
				params: { slug: originalSlug.replace(/\s+/g, '-') },
				props: post,
			});
		}
	});
	
	return paths;
}
type Props = CollectionEntry<'research'>;

const post = Astro.props;
const { Content } = await render(post);
---

<BlogPost {...post.data}>
	<Content />
</BlogPost>
